{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Deferred = void 0;\nconst TimeoutError_1 = require(\"./TimeoutError\");\nclass Deferred {\n  constructor() {\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      this._resolve = resolve;\n    });\n  }\n  registerTimeout(timeoutInMillis, callback) {\n    if (this._timeout) return;\n    this._timeout = setTimeout(() => {\n      callback();\n      this.reject(new TimeoutError_1.TimeoutError('Operation timeout'));\n    }, timeoutInMillis);\n  }\n  _clearTimeout() {\n    if (!this._timeout) return;\n    clearTimeout(this._timeout);\n  }\n  resolve(value) {\n    this._clearTimeout();\n    this._resolve(value);\n  }\n  reject(error) {\n    this._clearTimeout();\n    this._reject(error);\n  }\n  promise() {\n    return this._promise;\n  }\n}\nexports.Deferred = Deferred;","map":{"version":3,"names":["TimeoutError_1","require","Deferred","constructor","_promise","Promise","resolve","reject","_reject","_resolve","registerTimeout","timeoutInMillis","callback","_timeout","setTimeout","TimeoutError","_clearTimeout","clearTimeout","value","error","promise","exports"],"sources":["../src/Deferred.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,MAAAA,cAAA,GAAAC,OAAA;AAOA,MAAaC,QAAQ;EAMnBC,YAAA;IACE,IAAI,CAACC,QAAQ,GAAG,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;MAC9C,IAAI,CAACC,OAAO,GAAGD,MAAM;MACrB,IAAI,CAACE,QAAQ,GAAGH,OAAO;IACzB,CAAC,CAAC;EACJ;EAEAI,eAAeA,CAACC,eAAuB,EAAEC,QAAkB;IACzD,IAAI,IAAI,CAACC,QAAQ,EAAE;IAEnB,IAAI,CAACA,QAAQ,GAAGC,UAAU,CAAC,MAAK;MAC9BF,QAAQ,EAAE;MACV,IAAI,CAACL,MAAM,CAAC,IAAIP,cAAA,CAAAe,YAAY,CAAC,mBAAmB,CAAC,CAAC;IACpD,CAAC,EAAEJ,eAAe,CAAC;EACrB;EAEUK,aAAaA,CAAA;IACrB,IAAI,CAAC,IAAI,CAACH,QAAQ,EAAE;IACpBI,YAAY,CAAC,IAAI,CAACJ,QAAQ,CAAC;EAC7B;EAEAP,OAAOA,CAACY,KAAQ;IACd,IAAI,CAACF,aAAa,EAAE;IACpB,IAAI,CAACP,QAAQ,CAACS,KAAK,CAAC;EACtB;EAEAX,MAAMA,CAACY,KAAY;IACjB,IAAI,CAACH,aAAa,EAAE;IACpB,IAAI,CAACR,OAAO,CAACW,KAAK,CAAC;EACrB;EAEAC,OAAOA,CAAA;IACL,OAAO,IAAI,CAAChB,QAAQ;EACtB;;AAvCFiB,OAAA,CAAAnB,QAAA,GAAAA,QAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.retryAsPromised = exports.TimeoutError = void 0;\nclass TimeoutError extends Error {\n  constructor(message, previousError) {\n    super(message);\n    this.name = \"TimeoutError\";\n    this.previous = previousError;\n  }\n}\nexports.TimeoutError = TimeoutError;\nfunction matches(match, err) {\n  if (typeof match === 'function') {\n    try {\n      if (err instanceof match) return true;\n    } catch (_) {\n      return !!match(err);\n    }\n  }\n  if (match === err.toString()) return true;\n  if (match === err.message) return true;\n  return match instanceof RegExp && (match.test(err.message) || match.test(err.toString()));\n}\nfunction retryAsPromised(callback, optionsInput) {\n  if (!callback || !optionsInput) {\n    throw new Error('retry-as-promised must be passed a callback and a options set');\n  }\n  optionsInput = typeof optionsInput === \"number\" ? {\n    max: optionsInput\n  } : optionsInput;\n  const options = {\n    $current: \"$current\" in optionsInput ? optionsInput.$current : 1,\n    max: optionsInput.max,\n    timeout: optionsInput.timeout || undefined,\n    match: optionsInput.match ? Array.isArray(optionsInput.match) ? optionsInput.match : [optionsInput.match] : [],\n    backoffBase: optionsInput.backoffBase === undefined ? 100 : optionsInput.backoffBase,\n    backoffExponent: optionsInput.backoffExponent || 1.1,\n    report: optionsInput.report,\n    name: optionsInput.name || callback.name || 'unknown'\n  };\n  if (options.match && !Array.isArray(options.match)) options.match = [options.match];\n  if (options.report) options.report('Trying ' + options.name + ' #' + options.$current + ' at ' + new Date().toLocaleTimeString(), options);\n  return new Promise(function (resolve, reject) {\n    let timeout;\n    let backoffTimeout;\n    let lastError;\n    if (options.timeout) {\n      timeout = setTimeout(function () {\n        if (backoffTimeout) clearTimeout(backoffTimeout);\n        reject(new TimeoutError(options.name + ' timed out', lastError));\n      }, options.timeout);\n    }\n    Promise.resolve(callback({\n      current: options.$current\n    })).then(resolve).then(function () {\n      if (timeout) clearTimeout(timeout);\n      if (backoffTimeout) clearTimeout(backoffTimeout);\n    }).catch(function (err) {\n      if (timeout) clearTimeout(timeout);\n      if (backoffTimeout) clearTimeout(backoffTimeout);\n      lastError = err;\n      if (options.report) options.report(err && err.toString() || err, options, err);\n      // Should not retry if max has been reached\n      var shouldRetry = options.$current < options.max;\n      if (!shouldRetry) return reject(err);\n      shouldRetry = options.match.length === 0 || options.match.some(function (match) {\n        return matches(match, err);\n      });\n      if (!shouldRetry) return reject(err);\n      var retryDelay = options.backoffBase * Math.pow(options.backoffExponent, options.$current - 1);\n      // Do some accounting\n      options.$current++;\n      if (options.report) options.report(`Retrying ${options.name} (${options.$current})`, options);\n      if (retryDelay) {\n        // Use backoff function to ease retry rate\n        if (options.report) options.report(`Delaying retry of ${options.name} by ${retryDelay}`, options);\n        backoffTimeout = setTimeout(function () {\n          retryAsPromised(callback, options).then(resolve).catch(reject);\n        }, retryDelay);\n      } else {\n        retryAsPromised(callback, options).then(resolve).catch(reject);\n      }\n    });\n  });\n}\nexports.retryAsPromised = retryAsPromised;\n;\nexports.default = retryAsPromised;","map":{"version":3,"names":["Object","defineProperty","exports","value","retryAsPromised","TimeoutError","Error","constructor","message","previousError","name","previous","matches","match","err","_","toString","RegExp","test","callback","optionsInput","max","options","$current","timeout","undefined","Array","isArray","backoffBase","backoffExponent","report","Date","toLocaleTimeString","Promise","resolve","reject","backoffTimeout","lastError","setTimeout","clearTimeout","current","then","catch","shouldRetry","length","some","retryDelay","Math","pow","default"],"sources":["C:/Users/teply/OneDrive/Рабочий стол/web_project/client/node_modules/retry-as-promised/dist/index.js"],"sourcesContent":["'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.retryAsPromised = exports.TimeoutError = void 0;\nclass TimeoutError extends Error {\n    constructor(message, previousError) {\n        super(message);\n        this.name = \"TimeoutError\";\n        this.previous = previousError;\n    }\n}\nexports.TimeoutError = TimeoutError;\nfunction matches(match, err) {\n    if (typeof match === 'function') {\n        try {\n            if (err instanceof match)\n                return true;\n        }\n        catch (_) {\n            return !!match(err);\n        }\n    }\n    if (match === err.toString())\n        return true;\n    if (match === err.message)\n        return true;\n    return match instanceof RegExp\n        && (match.test(err.message) || match.test(err.toString()));\n}\nfunction retryAsPromised(callback, optionsInput) {\n    if (!callback || !optionsInput) {\n        throw new Error('retry-as-promised must be passed a callback and a options set');\n    }\n    optionsInput = (typeof optionsInput === \"number\" ? { max: optionsInput } : optionsInput);\n    const options = {\n        $current: \"$current\" in optionsInput ? optionsInput.$current : 1,\n        max: optionsInput.max,\n        timeout: optionsInput.timeout || undefined,\n        match: optionsInput.match ? Array.isArray(optionsInput.match) ? optionsInput.match : [optionsInput.match] : [],\n        backoffBase: optionsInput.backoffBase === undefined ? 100 : optionsInput.backoffBase,\n        backoffExponent: optionsInput.backoffExponent || 1.1,\n        report: optionsInput.report,\n        name: optionsInput.name || callback.name || 'unknown'\n    };\n    if (options.match && !Array.isArray(options.match))\n        options.match = [options.match];\n    if (options.report)\n        options.report('Trying ' + options.name + ' #' + options.$current + ' at ' + new Date().toLocaleTimeString(), options);\n    return new Promise(function (resolve, reject) {\n        let timeout;\n        let backoffTimeout;\n        let lastError;\n        if (options.timeout) {\n            timeout = setTimeout(function () {\n                if (backoffTimeout)\n                    clearTimeout(backoffTimeout);\n                reject(new TimeoutError(options.name + ' timed out', lastError));\n            }, options.timeout);\n        }\n        Promise.resolve(callback({ current: options.$current }))\n            .then(resolve)\n            .then(function () {\n            if (timeout)\n                clearTimeout(timeout);\n            if (backoffTimeout)\n                clearTimeout(backoffTimeout);\n        })\n            .catch(function (err) {\n            if (timeout)\n                clearTimeout(timeout);\n            if (backoffTimeout)\n                clearTimeout(backoffTimeout);\n            lastError = err;\n            if (options.report)\n                options.report((err && err.toString()) || err, options, err);\n            // Should not retry if max has been reached\n            var shouldRetry = options.$current < options.max;\n            if (!shouldRetry)\n                return reject(err);\n            shouldRetry = options.match.length === 0 || options.match.some(function (match) {\n                return matches(match, err);\n            });\n            if (!shouldRetry)\n                return reject(err);\n            var retryDelay = options.backoffBase * Math.pow(options.backoffExponent, options.$current - 1);\n            // Do some accounting\n            options.$current++;\n            if (options.report)\n                options.report(`Retrying ${options.name} (${options.$current})`, options);\n            if (retryDelay) {\n                // Use backoff function to ease retry rate\n                if (options.report)\n                    options.report(`Delaying retry of ${options.name} by ${retryDelay}`, options);\n                backoffTimeout = setTimeout(function () {\n                    retryAsPromised(callback, options)\n                        .then(resolve)\n                        .catch(reject);\n                }, retryDelay);\n            }\n            else {\n                retryAsPromised(callback, options)\n                    .then(resolve)\n                    .catch(reject);\n            }\n        });\n    });\n}\nexports.retryAsPromised = retryAsPromised;\n;\nexports.default = retryAsPromised;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}